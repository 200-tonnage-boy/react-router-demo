## 初始化
### react-router-dom
  在使用rrd时，可以引入 BrowserRouter as Router,HashRouter,Route等组件，用于如下路由
  ~~~JavaScript
    <HashRouter>
    <div>
      <ul>
        <li>
          <a href="#/a">to A</a>
        </li>
        <li>
          <a href="#/b">to B</a>
        </li>
      </ul>
    </div>
    <div style={{ height: "500px", border: "1px solid" }}>
      <Route exact path="/a">
        <span>页面A</span>
      </Route>
      <Route path="/b">
        <span>页面B</span>
      </Route>
    </div>
  </HashRouter>
  ~~~

  注意其中HashRouter/BrowserRouter在rrd中创建，但是主要还是依赖rr与history两个库，源码中的核心定义如下：
  ~~~JavaScript
    function HashRouter() {
    var _this;

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;
    _this.history = history.createHashHistory(_this.props);
    return _this;
  }
  var _proto = HashRouter.prototype;
  _proto.render = function render() {
    return React.createElement(reactRouter.Router, {
      history: this.history,
      children: this.props.children
    });
  };
  ~~~
可以看到其中主要是通过history中的createHashHistory方法创建一个history对象，并传递进rr库到处的Router组件中，BrowserRouter组件完全一样，只是history属性是由createBrowserHistory方法返回；
至于其他的如route导出，则是直接将rr库的对应部分进行导出，以Route为例：
~~~JavaScript
Object.defineProperty(exports, 'Route', {
  enumerable: true,
  get: function () {
    return reactRouter.Route;// 这个reactRouter是引用的rr库
  }
});
~~~

## Router/Route
  Route中的组件的props会多出3个属性
  - history: 路由功能，跳转拦截等等
  - location：URL信息，路径名等等 
  - match：匹配信息，是否精确匹配等

  根据上面，在使用<HashRouter />和<BrowserRouter />时其内部其实是渲染的Router组件，该组件由react-router提供；使用时内部嵌套Route组件；

### Router
  该组件内部负责渲染route，并给route提供history和location，是通过HashRouter组件创建并通过props传递进来的
  该组件通过调用history库的listen方法来监听路由的变化，变化后将最新的location信息更新至State，从而引起更新传递进Route中
### Route
  该组件组要是通过传递进来的location的pathname校验path来确定是否渲染component(path component为使用Route组件时传递的props)，并将路由信息传递给要渲染的组件

  **tips: 注意在源码中，match也会传递给Route，并不完全由Route生成；** ；

## hashRouter

## 随笔
  - history 目前最新版本是v5，该版本引入了破坏性更改，hash模式下也用原生的html 5 history实现，因此不再支持不支持HTML5 History的浏览器；目前安装react-router-dom还是会安装，4.10.1（package 中是4.9^因此是大于4.9 小于5.0）
  - react-router跳转传参主要方式整理：query,match,url，state,**注意state传参刷新页面不会丢失（hash模式下会丢失，回退的时候,如果是hash模式state是undefined，如果是browser模式会有记录；官网文档形容hash模式下是不支持location.state的，但是实际使用是可以的，不过会有些表现异常，比如前面说的）**；（为什么？）
  - 注意push多次后，再多次回退，此时再次push，后面的记录会全部丢失；
  -  `('/b',{name:'xxx'})`;`{pathname:'/b',state:{name:'xxx'}}` 使用props.history.push传参的时候应该是支持这两种形式的，hash模式下第一种是不行的，browser可以
  